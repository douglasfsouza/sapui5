<mvc:View xmlns:core="sap.ui.core"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:smartField="sap.ui.comp.smartfield"
	xmlns:grid="sap.ui.table"	
	xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
	xmlns:smartTable="sap.ui.comp.smarttable"
	xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
	controllerName="dgs.dsp.Controller.DspList"
	height="100%">

		<!-- use this to make the table occupy the available screen height -->
		<VBox fitContainer="true">
			<smartFilterBar:SmartFilterBar id="smartFilterBar" 
			                               entitySet="Expenses" 
										   persistencyKey="SmartFilter_Explored" 
										   initialise=".onFilterBarExtension"
										    >
				
				<!-- layout data used to make the table growing but the filter bar fixed -->
				<smartFilterBar:layoutData>
					<FlexItemData shrinkFactor="0"/>
				</smartFilterBar:layoutData>
			</smartFilterBar:SmartFilterBar>
			
			<smartTable:SmartTable id="STExpenses" 
			                       entitySet="Expenses" 
								   smartFilterId="smartFilterBar" 
								   tableType="Table" 
								   header="Expenses" 
								   persistencyKey="SmartTableAnalytical_Explored" 
								   enableAutoBinding="true" 
								   class="sapUiResponsiveContentPadding" 
								   editTogglable="false" 
								   useVariantManagement="false"
								   app:useSmartToggle="false">
				<!-- layout data used to make the table growing but the filter bar fixed -->
				<smartTable:layoutData>
					<FlexItemData growFactor="1" baseSize="0%"/>
				</smartTable:layoutData>

				<smartTable:customToolbar>
					<OverflowToolbar>
						<ToolbarSpacer /> 
						<Button text="Add" icon="sap-icon://add" press="onAddPressed" />
						<Button text="Update" icon="sap-icon://edit" enabled="{= ${local>/canUpdate}}" press="onUpdatePressed" />
						<Button text="Delete" icon="sap-icon://delete" enabled="{= ${local>/canDelete} ? true : false}" press="onDeletePressed" />
					</OverflowToolbar>
					
				</smartTable:customToolbar>

				<grid:Table
					visibleRowCountMode="Auto"
					rowsUpdated=".onBusyStateChangedx"
					rowHeight="28"
					columnHeaderHeight="24"
					alternateRowColors="true"	
					rowSelectionChange="onRowSelectionChange"			 
				>
					<grid:columns>
						<grid:Column >
							<grid:customData>
								<core:CustomData key="p13nData" id="csdDate"
									value='\{"columnKey": "Date",
										"autoColumnWidth": \{"min": 10, "max": 40},
										"columnIndex": 0,
										"leadingProperty": "Date",
										"sortProperty": "Date" 
										}' />								
								 
							</grid:customData>
							<grid:label>
								<Label text="Date" width="10rem" />
							</grid:label>
							<grid:template>
							<HBox alignItems="Center" justifyContent="SpaceBetween" width="10rem">
								<items>  
									 <Text	
									    width ="10rem"
									 	text="{ path: 'Date', type: 'sap.ui.model.type.DateTime', formatOptions: { pattern: 'dd-MM-yyyy', UTC: true } }" 									 
									 />																				 
								</items>                                    
							</HBox>
						</grid:template> 
						</grid:Column>
					</grid:columns>
				</grid:Table>
			</smartTable:SmartTable>
		</VBox>
</mvc:View>